<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title itemprop="name">A-K Catalog</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style type="text/css">

		</style>
  	<link rel="stylesheet" href="./assets/css/app.css">
	</head>
	<body>


	

<header class="header" role="banner">
  <h1 class="header__headline"><span>Welcome&hellip; It's</span> Cocktail O'Clock</h1>
</header>


<div class="app" role="tablist">

  <input type="radio" name="category" id="category01" class="menu-category" checked autofocus role="tab" />
<label for="category01" class="menu-category">Spirituous</label>
<input type="radio" name="category" id="category02" class="menu-category" role="tab" />
<label for="category02" class="menu-category">Non-alcoholic</label>


  <section class="message" id="jsMessage">
  <p class="message__text">Actualising<span class="message__waiting">...</span> <span id="jsStatus" class="message__status">Sorry, I need JavaScript!</span></p>
</section>


  <main class="main" role="main">

    <section class="category-section category-section__01" id="jsSection1">
  <h2 class="category-section__headline">Adult drinks</h2>

  <input type="checkbox" name="category01-filter" id="category01-filter01" class="menu-category-filter" data-filter="one" />
  <label for="category01-filter01">Beginner</label>
  <input type="checkbox" name="category01-filter" id="category01-filter02"  class="menu-category-filter" data-filter="two" />
  <label for="category01-filter02">Advanced</label>

  <div class="teaser-section" id="jsTeaserSpirituous">

    <article class="teaser-section__teaser" data-tag="profi" data-id="0"><img class="teaser-section__image" width="150" height="150" src="http://www.cocktailberater.de/img/recipes/B52_iba_small.jpg" alt=""><div class="teaser-section__text"><h3>B 52</h3><dt>Ingredients:</dt><dd><span class="teaser-section__unit">2cl</span> Cremelikör, <span class="teaser-section__unit">2cl</span> Kaffeelikör, <span class="teaser-section__unit">1cl</span> Rum 73%, </dd><p><strong>Rating;</strong> 3.75 / 5</p><input type="checkbox" class="teaser-section__more-button" name="learn-more0" id="learn-more0"><label for="learn-more0">Learn more</label><dl class="teaser-section__more"><dt>Description:</dt><dd>-</dd><dt>Instruction:</dt><dd>Kaffeelikör, Irish Cream (bevorzugt Baileys) und 73% Rum, in dieser Reihenfolge vorsichtig in ein Shooterglas geben, so dass sich die Zutaten schichten. Das ganze dann anzünden. Den Trinkhalm natürlich beilegen und nicht in das brennende Glas tun.
Den Shooter, während er brennt, schnellstmöglich durch den Strohhalm trinken.

In der Ur-Version brannte der B52 übrigens nicht. Da wurde als obere Schicht der Grand Marnier Cordon Rouge verwendet.</dd></dl></div></article>

<article class="teaser-section__teaser" data-tag="advanced" data-id="1"><img class="teaser-section__image" width="150" height="150" src="http://www.cocktailberater.de/img/recipes/B52_iba_small.jpg" alt=""><div class="teaser-section__text"><h3>B 52 nach IBA</h3><dt>Ingredients:</dt><dd><span class="teaser-section__unit">2cl</span> Cremelikör, <span class="teaser-section__unit">2cl</span> Kaffeelikör, <span class="teaser-section__unit">2cl</span> Triple Sec Curaçao, </dd><p><strong>Rating;</strong> 3.64 / 5</p><input type="checkbox" class="teaser-section__more-button" name="learn-more1" id="learn-more1"><label for="learn-more1">Learn more</label><dl class="teaser-section__more"><dt>Description:</dt><dd>Der B52 ist ein Shooter, hier das Rezept aus der Kategorie "Popular Drinks" der "IBA Offical Cocktails".</dd><dt>Instruction:</dt><dd>Zuerst den Kahluha, dann Bailey's Irish Cream und zuletzt Grand Marnier vorsichtig in ein Shooterglas schichten (bauen) und mit einem Rührstab servieren.</dd></dl></div></article>

<article class="teaser-section__teaser" data-tag="beginner" data-id="2"><img class="teaser-section__image" width="150" height="150" src="http://www.cocktailberater.de/img/recipes/15.jpg" alt=""><div class="teaser-section__text"><h3>Bahama Mama</h3><dt>Ingredients:</dt><dd><span class="teaser-section__unit">1cl</span> Grenadinesirup, <span class="teaser-section__unit">1cl</span> Zitronensaft, <span class="teaser-section__unit">2cl</span> Rum (weiß), <span class="teaser-section__unit">4cl</span> Rum (braun), <span class="teaser-section__unit">4cl</span> Orangensaft, <span class="teaser-section__unit">4cl</span> Ananassaft, <span class="teaser-section__unit">2cl</span> Whiskeylikör, <span class="teaser-section__unit">4Stück</span> Eiswürfel, </dd><p><strong>Rating;</strong> 3.26 / 5</p><input type="checkbox" class="teaser-section__more-button" name="learn-more2" id="learn-more2"><label for="learn-more2">Learn more</label><dl class="teaser-section__more"><dt>Description:</dt><dd>-</dd><dt>Instruction:</dt><dd>Die Zutaten mit einigen Eiswürfeln shaken und in ein Cocktailglas geben. Mit tropischen Früchten dekorieren.</dd></dl></div></article>

  </div>
</section>


<section class="category-section category-section__02" id="jsSection2">
  <h2 class="category-section__headline">Soft drinks</h2>

  <input type="checkbox" name="category02-filter" id="category02-filter01" class="menu-category-filter" data-filter="one" />
  <label for="category02-filter01">Beginner</label>
  <input type="checkbox" name="category02-filter"id="category02-filter02"  class="menu-category-filter" data-filter="two" />
  <label for="category02-filter02">Advanced</label>

  <div class="teaser-section" id="jsTeaserNonAlc">

    <article class="teaser-section__teaser" data-tag="advanced" data-id="39"><img class="teaser-section__image" width="150" height="150" src="http://www.cocktailberater.de/img/recipes/19.jpg" alt=""><div class="teaser-section__text"><h3>Swimming Pool alkoholfrei nach Brandl</h3><dt>Ingredients:</dt><dd><span class="teaser-section__unit">14cl</span> Ananassaft, <span class="teaser-section__unit">2cl</span> Sahne, <span class="teaser-section__unit">2cl</span> Blue Curacao Sirup, <span class="teaser-section__unit">2cl</span> Kokossirup, <span class="teaser-section__unit">4Stück</span> Eiswürfel, </dd><p><strong>Rating;</strong> 3.45 / 5</p><input type="checkbox" class="teaser-section__more-button" name="learn-more39" id="learn-more39" tabindex="-1"><label for="learn-more39">Learn more</label><dl class="teaser-section__more"><dt>Description:</dt><dd>Dies ist die alkoholfreie Variante des tropischen Swimming Pool Cocktails.</dd><dt>Instruction:</dt><dd>Mit Eiswürfeln im Shaker kräftig schütteln und durch das Barsieb in ein Fancyglas auf einige Eiswürfel abgießen. Ein Ananasstück mit einer Cocktailkirsche an den Glasrand stecken.</dd></dl></div></article>

  </div>
</section>


  </main>
</div>

<script type="text/javascript">

  // template engine
  (function() {
    'use strict';
    var httpRequest;
    var targetMessage = document.getElementById('jsMessage');

    targetMessage.classList.add('hide');
    function makeRequest(url) {
      httpRequest = new XMLHttpRequest();

      if (!httpRequest) {
        targetMessage.classList.remove('hide');
        document.getElementById('jsStatus').textContent = 'Sorry, I need a connection!';
        return false;
      }
      httpRequest.onreadystatechange = generateContents;
      httpRequest.open('GET', url);
      httpRequest.send();
    }

    function generateContents() {
      if (httpRequest.readyState === XMLHttpRequest.DONE) {
        if (httpRequest.status === 200) {
          var data = JSON.parse(httpRequest.responseText);
          var dataset;
          var recipes = data.rsp.recipes.recipe;

          document.getElementById('jsTeaserSpirituous').innerHTML = '';
          document.getElementById('jsTeaserNonAlc').innerHTML = '';

          var ingredients = function () {
            var components = obj.components.component;
            var ingredientList = '';
            for (var i = 0; i < components.length; i++) {
              var comp = components[i]['@attributes'];
              ingredientList += '<span class="teaser-section__unit">' + comp.amount + comp.unit + '</span> ' + comp.name + ', ';
            }
            return ingredientList;
          };

          var insertTemplate = function(dataset, articleTarget, i) {
            articleTarget.insertAdjacentHTML('beforeend',
              '<article class="teaser-section__teaser" data-tag="' + dataset.difficulty + '" data-id="' + i + '">' +
              '<img class="teaser-section__image" width="150" height="150" src="' + dataset.picture + '" alt="" />' +
              '<div  class="teaser-section__text">' +
              '<h3>' + dataset.name + '</h3>' +
              '<dt>Ingredients:</dt>' +
              '<dd>' + ingredients() + '</dd>' +
              '<p><strong>Rating;</strong> ' + dataset.rating + ' / 5</p>' +
              '<input type="checkbox" class="teaser-section__more-button" name="learn-more' + i + '" id="learn-more' +i + '" />' +
              '<label for="learn-more'+ i + '">Learn more</label>' +
              '<dl class="teaser-section__more">' +
              '<dt>Description:</dt>' +
              '<dd>' + dataset.description + '</dd>' +
              '<dt>Instruction:</dt>' +
              '<dd>' + dataset.instructions + '</dd>' +
              '</dl>' +
              '</div>' +
              '</article>'
            );
          };

          for (var i = 0; i < recipes.length; i++) {
            var obj = recipes[i];
            var articleTarget;
            dataset = {
              difficulty: obj['@attributes'].difficulty || 'no data',
              picture: obj.photos.photo['@attributes'].url || 'images/placeholder.svg',
              name: obj['@attributes'].name || 'no data',
              description: obj['@attributes'].description || '-',
              rating: obj['@attributes'].rating || 'no data',
              instructions: obj['@attributes'].instruction || '-'
            };

            if (obj['@attributes'].isAlcoholic === '1') {
              articleTarget = document.getElementById('jsTeaserSpirituous');
            } else {
              articleTarget = document.getElementById('jsTeaserNonAlc');
            }

            insertTemplate(dataset, articleTarget, i);

          }
          targetMessage.classList.add('hide');

        } else {
          targetMessage.classList.remove('hide');
          document.getElementById('jsStatus').textContent = 'Sorry, I need a connection!';
          return false;
        }
      }
    }
    makeRequest('../data/data-offline.json');
  })();

  // accessibility
  (function() {
    var section1 = document.getElementById('jsSection1');
    var section2 = document.getElementById('jsSection2');
    var section1Inputs = section1.getElementsByTagName('input');
    var section2Inputs = section2.getElementsByTagName('input');
    var catMenu1 = document.getElementById('category01');
    var catMenu2 = document.getElementById('category02');
    var filter1Cat1 = document.getElementById('category01-filter01');
    var filter2Cat1 = document.getElementById('category01-filter02');
    var filter1Cat2 = document.getElementById('category02-filter01');
    var filter2Cat2 = document.getElementById('category02-filter02');

    // initially set section2Inputs inactive
    var setInitialNotActive = function() {
      for(var i=0; i<section2Inputs.length; i++) {
          section2Inputs[i].setAttribute('tabindex', '-1');
      }
      section2.setAttribute('aria-hidden', 'true');
    };
    window.onload = setInitialNotActive;

    // aria controls
    catMenu1.onfocus = function() {
      section1.setAttribute('aria-hidden', 'false');
      section2.setAttribute('aria-hidden', 'true');
      for(var i=0; i<section1Inputs.length; i++) {
          section1Inputs[i].setAttribute('tabindex', '0');
      }
      for(var x=0; x<section2Inputs.length; x++) {
          section2Inputs[x].setAttribute('tabindex', '-1');
      }
    };
    catMenu2.onfocus = function() {
      section1.setAttribute('aria-hidden', 'true');
      section2.setAttribute('aria-hidden', 'false');
      for(var i=0; i<section1Inputs.length; i++) {
          section1Inputs[i].setAttribute('tabindex', '-1');
      }
      for(var x=0; x<section2Inputs.length; x++) {
          section2Inputs[x].setAttribute('tabindex', '0');
      }
    };

    filter1Cat1.onchange = function() {
      var filterTag1Cat1 = section1.querySelectorAll('[data-tag="beginner"]');
      var filterTag2Cat1 = section1.querySelectorAll('[data-tag="advanced"]');
      if (this.checked) {
        for(var i=0; i<filterTag2Cat1.length; i++) {
          filterTag2Cat1[i].setAttribute('aria-hidden', 'true');
        }
        for(var x=0; x<filterTag1Cat1.length; x++) {
          filterTag1Cat1[x].setAttribute('aria-hidden', 'false');
        }
      }
    };
    filter2Cat1.onchange = function() {
      var filterTag1Cat1 = section1.querySelectorAll('[data-tag="beginner"]');
      var filterTag2Cat1 = section1.querySelectorAll('[data-tag="advanced"]');
      if (this.checked) {
        for(var i=0; i<filterTag2Cat1.length; i++) {
          filterTag2Cat1[i].setAttribute('aria-hidden', 'false');
        }
        for(var x=0; x<filterTag1Cat1.length; x++) {
          filterTag1Cat1[x].setAttribute('aria-hidden', 'true');
        }
      }
    };
    filter1Cat2.onchange = function() {
      var filterTag1Cat2 = section2.querySelectorAll('[data-tag="beginner"]');
      var filterTag2Cat2 = section2.querySelectorAll('[data-tag="advanced"]');
      if (this.checked) {
        for(var i=0; i<filterTag2Cat2.length; i++) {
          filterTag2Cat2[i].setAttribute('aria-hidden', 'true');
        }
        for(var x=0; x<filterTag1Cat2.length; x++) {
          filterTag1Cat2[x].setAttribute('aria-hidden', 'false');
        }
      }
    };
    filter2Cat2.onchange = function() {
      var filterTag1Cat2 = section2.querySelectorAll('[data-tag="beginner"]');
      var filterTag2Cat2 = section2.querySelectorAll('[data-tag="advanced"]');
      if (this.checked) {
        if (this.checked) {
          for(var i=0; i<filterTag2Cat2.length; i++) {
            filterTag2Cat2[i].setAttribute('aria-hidden', 'false');
          }
          for(var x=0; x<filterTag1Cat2.length; x++) {
            filterTag1Cat2[x].setAttribute('aria-hidden', 'true');
          }
        }
      }
    };
  })();
</script>


	</body>
</html>


